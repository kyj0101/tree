<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>게시판</title>
  
  <script src="https://kit.fontawesome.com/d37b4c8496.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  

  <link rel="stylesheet" href="/css/common/main.css">
  <script src="/js/common/main.js"></script>
  <script src="/js/common/common.js"></script>
  <script src="/js/board/board.js"></script>
  <script src="/js/category/boardCategory.js"></script>
  <script src="/js/attendance/attendanceRecord.js"></script>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
  
</head>

<body>
  <header>
    <aside class="menu-container">
      <div class="logo">
        <i class="fas fa-tree" onclick="history.back()"></i>
        <p>VTEX</p>
      </div>
      <hr>
      <div class="plus-board">
        <p>프로젝트 게시판 추가</p>
        <i class="fas fa-plus add-board" data-toggle="modal" data-target="#addModal"></i>
      </div>
      <hr class="plus-hr" >
      <ul class="board-list-ul">
        <li>
        	<a href="/board/list">전체 공지사항</a>
        </li>
        <li th:each="category : ${categoryMapList}" style="display: flex; justify-content: space-between;">
        	<a th:href="@{/board/list(category=${category.categoryNo})}" th:text="${category.categoryName}" ></a>
        	<i class="fas fa-times categoryDelete" style="padding-right: 15px;"></i>
        </li>
        
      </ul>
      <hr>
      <div class="plus-board" data-toggle="modal" data-target="#addModal">
        <p>채팅 추가</p>
        <i class="fas fa-plus add-chat"></i>
      </div>
      <hr class="plus-hr">
      <ul class="chat-list-ul">
        <li><a href="/chat/room">전체 회의실</a></li>
      </ul>
    </aside>

    <div class="header-container">
      <ul class="info-ul">
        <li th:text="${categoryMap.categoryName}">
        </li>
        <li>
          <button type="button" style="appearance: none; border: none; background: none;" data-toggle="tooltip"
            data-placement="top" title="It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).">
            <i class="fas fa-info-circle "></i>
          </button>

        </li>
      </ul>

    </div>


    <aside>
      <div class="manager-menu-container">
        <ul style="display: flex; flex-direction: column; padding:20px;">
          <li>
            <i class="fas fa-bars"></i>
          </li>
        </ul>

        <ul style="display: flex; flex-direction: column; padding:20px;">
          <li style="margin-top: 500px; font-size: 25px;">
              <i class="fas fa-user-circle"></i>
          </li>
        </ul>

        <div id="manager-menu" class="manager-menu-hidden">
          <ul class="list-group">
            <li class="list-group-item">
              <a href="/commoncode/list">관리자 메뉴</a>
            </li>
            <li class="list-group-item">
              <a href="/member/mypage/update/view">마이페이지</a>
            </li>
          </ul>
        </div>

        <div id="user-profile" class="user-profile-hidden">
          <h5 th:text='${session.loginMember.name}'></h5>
          <ul>
            <li>
              <label for="email" class="visually-hidden">이메일</label>
              <input class="form-control" id="email" type="email" th:value='${session.loginMember.email}' readonly>
            </li>
            <li>
              <label for="position" class="visually-hidden">부서</label>
              <input class="form-control" id="position" type="text" th:value='${session.loginMember.departmentName}' readonly> 
            </li>
            <li>
              <label for="department" class="visually-hidden">직급</label>
       <input class="form-control" id="department" type="text" th:value='${session.loginMember.positionName}'  readonly> 
            </li>
          </ul>
          <ul class="btn-ul">
            <li>
            	<!-- 출근전 -->
            	<button type="button" class="btn btn-primary attendanceInBtn" th:if="${!isIn and !isOut}">출근</button>
            	<button type="button" class="btn btn-success disabled attendanceOutBtn" style="margin-left: 15px;" th:if="${!isIn and !isOut}" disabled>퇴근</button>    
            	
            	<!-- 출근후 -->
              	<button type="button" class="btn btn-primary attendanceInBtn disabled" th:if="${isIn and !isOut}" disabled>출근</button>
	            <button type="button" class="btn btn-success attendanceOutBtn" th:if="${isIn and !isOut}" style="margin-left: 15px;">퇴근</button>
	            
	            <!-- 퇴근후 --> 
	            <button type="button" class="btn btn-primary attendanceInBtn disabled" th:if="${isIn and isOut}" disabled>출근</button>
	            <button type="button" class="btn btn-success attendanceOutBtn disabled" th:if="${isIn and isOut}" style="margin-left: 15px;" disabled>퇴근</button>
	               
            </li>
            <li>
            </li>
          </ul>
          <button type="button" class="btn btn-warning btnLogout">로그아웃</button>
          <form id="logoutForm"></form>
        </div>
      </div>
    </aside>

  </header>

  <section>
    <div class="content-container">

      <figure>
        <figcaption>
          <p class="category-p"  th:text="${categoryMap.categoryName}"></p>
        </figcaption>
      </figure>
      <table class="table table-striped board-list-table">

        <thead>
          <tr>
            <th scope="col">게시글 번호</th>
            <th scope="col">작성자</th>
            <th scope="co1">제목</th>
            <th scope="col">조회수</th>
          </tr>
        </thead>

        <tbody>
           <tr th:each="board : ${boardList}">
            <th scope="row" th:if="${board.topAt == 'TOP'}">공지</th>
            <input type="hidden"  th:if="${board.topAt == 'TOP'}" th:value="${board.boardNo}" />
            <th scope="row" th:if="${board.topAt == 'BOTTOM'}" th:text="${board.boardNo}" </th>
            <td th:text="${board.name}"></td>
            <td th:text="${board.boardTitle}" class="boardTitle" data-toggle="modal" data-target="#view-board-modal"></td>
            <td th:text="${board.boardView}"></td>
          </tr>
        </tbody>

      </table>

    </div>
    <nav aria-label="Page navigation example" th:utext="${pageBar}">
    </nav>

    <div class="d-md-flex justify-content-md-end" style="margin-right: 170px;">
      <button type="button" class="btn btn-primary justify-content-md-end btn-board" data-toggle="modal" data-target="#write-board-modal">
        글쓰기
      </button>
    </div>

  </section>

</body>

</html>

<!-- 게시판 or 채팅방 추가 Modal -->
<div class="modal fade" id="addModal" data-backdrop="static" data-keyboard="false" tabindex="-1"
  aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title" id="add-modal-label">프로젝트 게시판 추가</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body member-modal-body ">
      
        <div class="input-group">
          <input type="input" class="form-control bg-light border-0 small title-input" list="datalistOptions" 
            placeholder="제목을 입력하세요." aria-label="Search" aria-describedby="basic-addon2">
        </div>


        <hr />

        <div>
          <ul class="member-list-ul">
         	<li></li>
          </ul>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-primary add-board-btn" style="margin-left: 650px;">생성</button>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- 게시글 상세보기 Modal -->
<div class="modal fade" id="view-board-modal" data-backdrop="static" data-keyboard="false" tabindex="-1"
  aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg">
    <div class="modal-content">
		<input type="hidden" th:value="${session.loginMember.email}" class="loginMemberEmail" />
      <div class="modal-header">
        <h5 class="modal-title boardDetailTitle" id="add-modal-label"></h5>

        <button type="button" class="close" data-dismiss="modal">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body member-modal-body boardDetailContent">
      	<div class="textDiv"></div>
        <ul class="file-download-ul">
        </ul>
      </div>
	
      <div class="modal-footer">
        <button type="button" class="btn btn-primary board-update-btn hidden">수정</button>
        <button type="button" class="btn btn-secondary boardDeleteBtn hidden">삭제</button>
        <p class="board-info-p"></p>
      </div>
    </div>
  </div>
</div>

<!-- 게시글 작성 Modal -->
<div class="modal fade" id="write-board-modal" data-backdrop="static"
	data-keyboard="false" tabindex="-1"
	aria-labelledby="staticBackdropLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-scrollable modal-lg">
		<div class="modal-content">
			<input type="hidden" id="boardNo" />
			<div class="modal-header">
				<h5 class="modal-title" id="add-modal-label">게시글 작성</h5>
				<button type="button" class="close" data-dismiss="modal"
					aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>

				<div class="modal-body member-modal-body ">
					<div class="input-group titleDiv">
						<input type="input"
							class="form-control bg-light border-0 small title-input"
							id="title"
							list="datalistOptions" placeholder="제목을 입력하세요."
							aria-label="Search" aria-describedby="basic-addon2">
						<input type="hidden" th:value="${categoryMap.categoryNo}" id="categoryNo" />
						<div>
							<input class="form-check-input" type="checkbox" value="Y" id="noticeAt" name="noticeAt">
							<label class="form-check-label" for="noticeAt"> 공지사항 </label>
						</div>
					</div>
					
					<div id="editor" name="content" class="board-content-textarea"></div>

					<div class="modal-footer">
						<span>*파일은 최대 5개까지 첨부할 수 있습니다.</span>
						<div class="boardBtnDiv" role="group" aria-label="Basic example">
							<button type="button" class="btn btn-info add-file-input">파일첨부추가</button>
							<button type="button" class="btn btn-primary boardBtn">글쓰기</button>
						</div>

						<div class='input-group input-file'>

							<div class='custom-file'>
								<label class='custom-file-label file1'> 파일을 첨부하세요. </label>
								<input	type='file' class='custom-file-input file-input' name='uploadFile'>
								<hr />
							</div>
							<div class='input-group-append'>
								<button class='btn btn-outline-secondary' type='button'
									id='inputGroupFileAddon04'>파일삭제</button>
							</div>
						</div>
					</div>
				</div>
		</div>
	</div>
</div>

</div>
</div>

<!-- toast editor -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.css">
<link rel="stylesheet" href="https://uicdn.toast.com/editor/2.0.0/toastui-editor.min.css">
<script src="https://uicdn.toast.com/editor/2.0.0/toastui-editor-all.min.js"></script>
<script src="https://uicdn.toast.com/tui-editor/latest/tui-editor-Editor-full.js"></script>

<script type="text/javascript">
const Editor = toastui.Editor;

var editor = new Editor({
	  el: document.querySelector('#editor'),
	  previewStyle: 'vertical',
      initialEditType: "markdown",
      height: '450px',
	});
</script>
